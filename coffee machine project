MENU = {
    "espresso": {
        "ingredients": {
            "water": 50,
            "coffee": 18,
        },
        "cost": 1.5,
    },
    "latte": {
        "ingredients": {
            "water": 200,
            "milk": 150,
            "coffee": 24,
        },
        "cost": 2.5,
    },
    "cappuccino": {
        "ingredients": {
            "water": 250,
            "milk": 100,
            "coffee": 24,
        },
        "cost": 3.0,
    }
}

resources = {
    "water": 300,
    "milk": 200,
    "coffee": 100,
    "money": 0
}


# Prompt user by asking ‚Äú What would you like? (espresso/latte/cappuccino)
def user_coffee():
    type_of_coffee = input("What would you like? (espresso/latte/cappuccino): ").lower()

# Turn off the Coffee Machine by entering ‚Äúoff‚Äù to the prompt.
    if type_of_coffee == "off":
        return None

# Print report
    if type_of_coffee == "report":
        for key, value in resources.items():
            print(f"{key}: {value}")
        return "report"
    return type_of_coffee

# Check resources sufficient?
def resources_sufficient(type_of_coffee):
    global resources
    for item in MENU[type_of_coffee]["ingredients"]:
        if resources[item] < MENU[type_of_coffee]["ingredients"][item]:
            print(f"Sorry, there is not enough {item}!")
            return False
    return True

# Process coins.
while True:
    choice = user_coffee()  # Get user input once per loop iteration
    if choice is None:  # If user entered "off", exit loop
        break
    if choice == "report":  # If user entered "report", continue loop
        continue

    if resources_sufficient(choice):
        print(f"Your total is: ${MENU[choice]['cost']}")
        print("Please insert coins.")
        quarters = int(input("How many quarters?: "))
        dimes = int(input("How many dimes?: "))
        nickles = int(input("How many nickles?: "))
        pennies = int(input("How many pennies?: "))
        total = (0.25 * quarters) + (0.10 * dimes) + (0.05 * nickles) + (0.01 * pennies)

# Check transaction successful?
        cost = MENU[choice]["cost"]
        if total < cost:
            print("Sorry, you don't have enough money!")
        else:
            change = total - cost
            print(f"Here is your change:${round(change, 2)}")
            resources["money"] += cost

# Make Coffee.
            ingredients = MENU[choice]["ingredients"]
            for item in ingredients:
                resources[item] -= ingredients[item]
            print(f"Here is your {choice} ‚òï ENJOY!!")

# After machine is turned off, show total money earned
print("\nMachine is now off.")
print(f"Total money earned today: ${round(resources['money'], 2)} üí∞")
